<div id="locationhistory" class="page-layout simple fullwidth" fxLayout="column">

   <!-- HEADER -->
   <div class="header accent p-20 h-120" fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="column" fxLayoutAlign="center start">
            <div fxLayout="row" fxLayoutAlign="start center">
                <mat-icon class="secondary-text s-18">receipt</mat-icon>
                <mat-icon class="secondary-text s-16">chevron_right</mat-icon>
                <span class="secondary-text">{{ 'LOCATIONHISTORY.LOCATIONHISTORY' | translate }}</span>
            </div>
            <div class="h1 mt-16">Report</div>
        </div>
    </div>
    <!-- / HEADER -->


    <div class="content p-24">  

        <div class="vertical-stepper-wrapper">
            <mat-vertical-stepper class="mat-elevation-z4" [linear]="true">
                <mat-step [stepControl]="verticalStepperStep1">

                    <form fxLayout="column" [formGroup]="verticalStepperStep1">

                        <ng-template matStepLabel>Select Report</ng-template>

                        <div fxFlex="1 0 auto" fxLayout="column" class="m-16 mt-0"  style="border: 1px solid #3b3b3b; border-radius: 5px;">

                            <div  fxLayout="row" fxLayoutAlign="center" >
                                <div class="filter_company_input">
                                    <input matInput  formControlName="filterstring" #filter placeholder="Search" (keyup) = "onReportFilter($event)">
                                    <mat-icon (click)="clearFilter()">clear</mat-icon>
                                </div>
                            </div>

                            <div class="report_table ml-12" style="width: 80%; overflow: auto;">
                                <mat-table [dataSource]="dataSourceReport" fusePerfectScrollbar>
                                    <ng-container matColumnDef="id">
                                        <mat-cell *matCellDef="let report" style="flex-basis: 10%; flex-grow: 0; flex-shrink: 1">
                                            <mat-checkbox (click)="$event.stopPropagation()"
                                                (change)="$event ? reportSelection.toggle(report) : null"
                                                [checked]="reportSelection.isSelected(report)"
                                                formControlName="report"
                                                >
                                            </mat-checkbox>
                                        </mat-cell>
                                    </ng-container>

                                    <ng-container matColumnDef="name">
                                        <mat-cell *matCellDef="let report" class="p-0">
                                            <p class="report text-truncate">{{report.name}}</p>
                                        </mat-cell>
                                    </ng-container>
                                    <mat-row  *matRowDef="let report; columns: reportColumns;" matRipple style="border-bottom-width: 0px;">
                                    </mat-row>
                                </mat-table>
                            </div>

                            <mat-paginator 
                                #paginatorReport
                                showFirstLastButtons
                                class="table_paginator_detail"
                                [length]="dataSourceReport.totalLength"
                                [pageSize]="10"
                                [hidePageSize]="true"
                            ></mat-paginator>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button mat-raised-button matStepperNext type="button" color="accent" (click)="getReportParams()">
                                Next
                            </button>
                        </div>

                    </form>

                </mat-step>

                <mat-step [stepControl]="verticalStepperStep2">

                    <form fxLayout="column" [formGroup]="verticalStepperStep2">

                        <ng-template matStepLabel>Report Detail</ng-template>

                        <div fxFlex="1 0 auto" fxLayout="row">

                            <mat-form-field appearance="outline" fxFlex="100">
                                <mat-label>Address</mat-label>
                                <textarea matInput formControlName="address" required>
                                    1600 Amphitheatre Pkwy
                                </textarea>
                                <mat-error>Address is required!</mat-error>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="accent">
                                Previous
                            </button>
                            <button mat-raised-button matStepperNext type="button" color="accent">
                                Next
                            </button>
                        </div>

                    </form>

                </mat-step>

                <mat-step [stepControl]="verticalStepperStep3">

                    <form fxLayout="column" [formGroup]="verticalStepperStep3">

                        <ng-template matStepLabel>OutPut Format</ng-template>

                        <div fxFlex="1 0 auto" fxLayout="row">

                            <mat-form-field appearance="outline" fxFlex="100">
                                <mat-label>Address</mat-label>
                                <textarea matInput formControlName="address" required>
                                    1600 Amphitheatre Pkwy
                                </textarea>
                                <mat-error>Address is required!</mat-error>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="accent">
                                Previous
                            </button>
                            <button mat-raised-button (click)="finishVerticalStepper()" type="button" color="accent">
                                Finish
                            </button>
                        </div>

                    </form>

                </mat-step>
            </mat-vertical-stepper>

        </div>
    </div>
</div>
